import requests
from retrying import retry

headers = {"User-Agent": "Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3928.4 Safari/537.36",
           "Cookie": "PSTM=1574481445; BD_UPN=12314753; BIDUPSID=4CD5ACF1911ADC42245E98DCD271C695; BAIDUID=AC8C6714D17504DFFD947389554E196B:FG=1; BDUSS=XctUlFYN0p6ZEozZnc0NnBDVXRzeTUzeEN0S3J3Wlh4OUlHYTNYUmVsMDdRQUJlRVFBQUFBJCQAAAAAAAAAAAEAAABl2j6bztIyODQ2NjAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADuz2F07s9hdN; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; BD_HOME=1; H_WISE_SIDS=145881_147230_142019_144428_145946_146170_141748_145497_144118_145333_147280_146537_146307_145931_131246_144681_141261_144743_144251_146573_147347_127969_146551_145968_146753_145417_146734_145998_131423_146802_114551_142205_146003_107318_145289_146590_146135_146824_140368_144966_147301_145607_144762_143472_142978_144017_145398_143859_146227_139913_110085; rsv_i=78cebuI3OTxGyLKq4spS9sDQntXTA2DzFGUizlY6sQNbPUR8JkdITnnqM%2F6CDWbLJ2Yx%2BRDjs0kh44nnUv5eaoTWdyKeuwk; plus_lsv=e1339ee5f098ff6b; plus_cv=1::m:49a3f4a6; BDICON=10294984.98; BDPASSGATE=IlPT2AEptyoA_yiU4VK03kIN8efRWrKAAe4JSzRh36O4fCaWmhH3BrVMSEnHN-a8AiTM-Y3fo_-5kV8PQlxmicwdggYTpW-H7CG-zNSF5aTvL_NgzbIZCb4jQUZqqvzxkgl-zuEHQ49zBCstpBTbpuo4ivKl73JQb4r56kCygKrl_oGm2X8My88bOXVfYZ0APNu594rXnEpKLDm4YxOtT9PecSIMR7QEy0uykts-A3r-vncMA3rSFfA10YjdGXV3Ef_-3OmTlaioB-UurnEnViwxd_; delPer=0; PSINO=3; COOKIE_SESSION=0_0_0_0_0_0_0_0_0_0_0_0_0_1589688905%7C1%230_0_0_0_0_0_0_0_1589688905%7C1; SE_LAUNCH=5%3A26494815; H_PS_PSSID=31657_1423_31672_21085_31596_31463_31321_30824; BD_CK_SAM=1; __yjsv5_shitong=1.0_7_78f326268c5afea50f00ae3acc6325627da5_300_1589691360340_112.49.191.165_4111f435; yjs_js_security_passport=cfa2158747a033f060dd083111492bd39092b6c0_1589692090_js; BDRCVFR[feWj1Vr5u3D]=mk3SLVN4HKm; H_PS_645EC=0e91%2B6teFT2SdG7NZELDksLQMcKIVNkV31sM9p1vLWvDd%2Bd82HCwG32mkpTLQY%2B5ifP4"}

def _parse_url(url):
    response = requests.get(url=url, headers=headers)
    assert response.status_code == 200
    return response.content.decode()

@retry(stop_max_attempt_number=3)
def parse_url(url):
    try:
        html =  _parse_url(url)
    except:
        html = None
    return html

if __name__ == '__main__':
    print(parse_url("http://www.baidu.com"))